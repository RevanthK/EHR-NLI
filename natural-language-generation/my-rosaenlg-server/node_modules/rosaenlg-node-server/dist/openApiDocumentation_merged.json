{"openapi":"3.0.1","info":{"title":"RosaeNLG API","description":"API over the Natural Language Generation library RosaeNLG, written in node.js.","contact":{"name":"Ludan Stoecklé","email":"ludan.stoeckle@rosaenlg.org","url":"https://rosaenlg.org"},"license":{"name":"MIT","url":"http://www.opensource.org/licenses/mit-license.php"},"externalDocs":{"description":"RosaeNLG reference documentation","url":"https://rosaenlg.org"},"version":"1.14.3"},"servers":[{"url":"http://localhost:5000/","description":"Local server"}],"components":{"schemas":{"JSONPackageSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://rosaenlg.org/jsonPackage.schema.json","title":"RosaeNLG JsonPackage","description":"A JSON package containing RosaeNLG templates","type":"object","properties":{"format":{"description":"version of the format","type":"string"},"templateId":{"description":"ID of the template","type":"string"},"src":{"description":"source of the template","type":"object","properties":{"entryTemplate":{"description":"entry point of the Pug template","type":"string"},"compileInfo":{"description":"informations to compile the template","type":"object","properties":{"language":{"description":"language","type":"string"},"compileDebug":{"description":"activates Pug compile debug","type":"boolean"}},"required":["language"]},"templates":{"description":"templates: map of template path and name to template content","additionalProperties":{"type":"string"}},"autotest":{"description":"informations to autotest the template","type":"object","properties":{"activate":{"description":"autotest is activated","type":"boolean"},"input":{"description":"json input to make the test rendering","type":"object"},"expected":{"description":"expected result: the rendered string must contain each of the string in the list","type":"array","items":{"type":"string"},"minItems":1}},"required":["activate","input","expected"]}},"required":["entryTemplate","compileInfo","templates"]},"comp":{"description":"the pre compiled template","type":"object","properties":{"compiled":{"description":"the compiled template","type":"string"},"compiledWithVersion":{"description":"version of RosaeNLG that compiled the template","type":"string"},"compiledBy":{"description":"what component compiled the template","type":"string"},"compiledWhen":{"description":"when the template was compiled","type":"string"}},"required":["compiled","compiledWithVersion"]}},"required":["templateId","src"]},"RenderResponseAbstract":{"type":"object","properties":{"renderedText":{"type":"string","description":"the rendered text (this is the interesting part)"},"renderOptions":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://rosaenlg.org/renderOptions.schema.json","title":"RosaeNLG Rendering Options","description":"RosaeNLG options to render a template. See https://rosaenlg.org/rosaenlg/1.4.0/advanced/params.html#_rendering_parameters","type":"object","properties":{"language":{"description":"the language of the template","type":"string","enum":["fr_FR","en_US","de_DE","it_IT","OTHER"]},"forceRandomSeed":{"description":"the random seed value, if it must be forced","type":"integer"},"defaultSynoMode":{"description":"default mode for synonyms","type":"string"},"defaultAmong":{"description":"default value for among","type":"integer"}},"required":["language"]},"ms":{"type":"integer","description":"the time in ms that was necessary to process the request (server side)"}}}},"parameters":{"templateIdInPath":{"name":"templateId","in":"path","schema":{"type":"string"},"example":"chanson","required":"true","description":"ID of the template"},"userInHeader":{"name":"X-RapidAPI-User","in":"header","schema":{"type":"string"},"description":"ID of the user"}}},"paths":{"/health":{"get":{"summary":"Health check.","responses":{"200":{"description":"Health is ok."},"503":{"description":"Bad health, typically cannot write to disk or S3 when persistent storage is set."}}}},"/templates":{"get":{"summary":"Get the IDs of the templates for user.","description":"Contains both the loaded templates and the ones which are on the permanent storage","parameters":[{"name":"X-RapidAPI-User","in":"header","schema":{"type":"string"},"description":"ID of the user"}],"responses":{"200":{"description":"the IDs of the templates","content":{"application/json":{"schema":{"type":"object","properties":{"ids":{"type":"array","description":"list of the IDs","items":{"type":"string"},"uniqueItems":true}}},"example":{"ids":["chanson"]}}}},"500":{"description":"templates could not be listed, generally due to a backend issue"}}},"put":{"summary":"Creates a new template.","description":"Creates a template from a JSON containing a packaged template. The template is validated, loaded, autotested (if configured so), and saved on disk or S3 if persistent storage is set.","parameters":[{"name":"X-RapidAPI-User","in":"header","schema":{"type":"string"},"description":"ID of the user"}],"requestBody":{"content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://rosaenlg.org/jsonPackage.schema.json","title":"RosaeNLG JsonPackage","description":"A JSON package containing RosaeNLG templates","type":"object","properties":{"format":{"description":"version of the format","type":"string"},"templateId":{"description":"ID of the template","type":"string"},"src":{"description":"source of the template","type":"object","properties":{"entryTemplate":{"description":"entry point of the Pug template","type":"string"},"compileInfo":{"description":"informations to compile the template","type":"object","properties":{"language":{"description":"language","type":"string"},"compileDebug":{"description":"activates Pug compile debug","type":"boolean"}},"required":["language"]},"templates":{"description":"templates: map of template path and name to template content","additionalProperties":{"type":"string"}},"autotest":{"description":"informations to autotest the template","type":"object","properties":{"activate":{"description":"autotest is activated","type":"boolean"},"input":{"description":"json input to make the test rendering","type":"object"},"expected":{"description":"expected result: the rendered string must contain each of the string in the list","type":"array","items":{"type":"string"},"minItems":1}},"required":["activate","input","expected"]}},"required":["entryTemplate","compileInfo","templates"]},"comp":{"description":"the pre compiled template","type":"object","properties":{"compiled":{"description":"the compiled template","type":"string"},"compiledWithVersion":{"description":"version of RosaeNLG that compiled the template","type":"string"},"compiledBy":{"description":"what component compiled the template","type":"string"},"compiledWhen":{"description":"when the template was compiled","type":"string"}},"required":["compiled","compiledWithVersion"]}},"required":["templateId","src"]},"example":{"templateId":"chanson","src":{"entryTemplate":"chanson.pug","compileInfo":{"compileDebug":false,"language":"fr_FR"},"templates":{"chanson.pug":"p\n  | il #[+verb(getAnonMS(), {verb: 'chanter', tense:'FUTUR'} )]\n  | \"#{chanson.nom}\"\n  | de #{chanson.auteur}\n"},"autotest":{"activate":true,"input":{"language":"fr_FR","chanson":{"auteur":"Édith Piaf","nom":"Non, je ne regrette rien"}},"expected":["Il chantera \"Non, je ne regrette rien\" d'Édith Piaf"]}}}}},"required":true},"responses":{"201":{"description":"template was properly loaded and is available for rendering","content":{"application/json":{"schema":{"type":"object","properties":{"templateId":{"type":"string","description":"ID of the created template"},"templateSha1":{"type":"string","description":"sha1 of the created template, to be used in render requests"},"ms":{"type":"number","description":"the time in ms that was needed to load the template"}}},"example":{"templateId":"chanson","templateSha1":"1bfdbcd203ec8e6f889b068fbb2d7d298b1db903","ms":37.48320007324219}}}},"400":{"description":"invalid user name, or template could not be compiled, or invalid template format"},"500":{"description":"template should have been saved on disk or S3 but could not be saved"}}}},"/templates/{templateId}":{"delete":{"summary":"Deletes an existing template for a user.","description":"Template will be unloaded, and deleted on the disk or S3 if permanent storage is set.","parameters":[{"name":"templateId","in":"path","schema":{"type":"string"},"example":"chanson","required":"true","description":"ID of the template"},{"name":"X-RapidAPI-User","in":"header","schema":{"type":"string"},"description":"ID of the user"}],"responses":{"204":{"description":"template does not exist, or if it existed, it was deleted and unloaded"}}},"get":{"summary":"Gets information on a template: sha1 and the original content.","parameters":[{"name":"templateId","in":"path","schema":{"type":"string"},"example":"chanson","required":"true","description":"ID of the template"},{"name":"X-RapidAPI-User","in":"header","schema":{"type":"string"},"description":"ID of the user"}],"responses":{"200":{"description":"information on a template","content":{"application/json":{"schema":{"properties":{"templateSha1":{"type":"string","description":"sha1 of the template, to be used in render requests"},"templateContent":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://rosaenlg.org/jsonPackage.schema.json","title":"RosaeNLG JsonPackage","description":"A JSON package containing RosaeNLG templates","type":"object","properties":{"format":{"description":"version of the format","type":"string"},"templateId":{"description":"ID of the template","type":"string"},"src":{"description":"source of the template","type":"object","properties":{"entryTemplate":{"description":"entry point of the Pug template","type":"string"},"compileInfo":{"description":"informations to compile the template","type":"object","properties":{"language":{"description":"language","type":"string"},"compileDebug":{"description":"activates Pug compile debug","type":"boolean"}},"required":["language"]},"templates":{"description":"templates: map of template path and name to template content","additionalProperties":{"type":"string"}},"autotest":{"description":"informations to autotest the template","type":"object","properties":{"activate":{"description":"autotest is activated","type":"boolean"},"input":{"description":"json input to make the test rendering","type":"object"},"expected":{"description":"expected result: the rendered string must contain each of the string in the list","type":"array","items":{"type":"string"},"minItems":1}},"required":["activate","input","expected"]}},"required":["entryTemplate","compileInfo","templates"]},"comp":{"description":"the pre compiled template","type":"object","properties":{"compiled":{"description":"the compiled template","type":"string"},"compiledWithVersion":{"description":"version of RosaeNLG that compiled the template","type":"string"},"compiledBy":{"description":"what component compiled the template","type":"string"},"compiledWhen":{"description":"when the template was compiled","type":"string"}},"required":["compiled","compiledWithVersion"]}},"required":["templateId","src"]}},"required":["templateSha1","templateContent"]},"example":{"templateSha1":"1bfdbcd203ec8e6f889b068fbb2d7d298b1db903","templateContent":{"templateId":"chanson","src":{"entryTemplate":"chanson.pug","compileInfo":{"activate":false,"compileDebug":false,"language":"fr_FR"},"templates":{"chanson.pug":"p\n  | il #[+verb(getAnonMS(), {verb: 'chanter', tense:'FUTUR'} )]\n  | \"#{chanson.nom}\"\n  | de #{chanson.auteur}\n"}},"user":"DEFAULT_USER"}}}}},"400":{"description":"invalid user name"},"404":{"description":"template does not exist for that user"}}}},"/templates/{templateId}/{templateSha1}/render":{"post":{"summary":"Renders an existing template using data.","description":"Renders an existing template using data passed in the request.","parameters":[{"name":"templateId","in":"path","schema":{"type":"string"},"example":"chanson","required":"true","description":"ID of the template"},{"name":"templateSha1","in":"path","schema":{"type":"string"},"example":"1bfdbcd203ec8e6f889b068fbb2d7d298b1db903","required":"true","description":"sha1 of the template (from create call)"},{"name":"X-RapidAPI-User","in":"header","schema":{"type":"string"},"description":"ID of the user"}],"requestBody":{"content":{"application/json":{"schema":{},"example":{"language":"fr_FR","chanson":{"auteur":"Édith Piaf","nom":"Non, je ne regrette rien"}}}},"required":true},"responses":{"200":{"description":"rendering went well","content":{"application/json":{"schema":{"type":"object","allOf":[{"type":"object","properties":{"renderedText":{"type":"string","description":"the rendered text (this is the interesting part)"},"renderOptions":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://rosaenlg.org/renderOptions.schema.json","title":"RosaeNLG Rendering Options","description":"RosaeNLG options to render a template. See https://rosaenlg.org/rosaenlg/1.4.0/advanced/params.html#_rendering_parameters","type":"object","properties":{"language":{"description":"the language of the template","type":"string","enum":["fr_FR","en_US","de_DE","it_IT","OTHER"]},"forceRandomSeed":{"description":"the random seed value, if it must be forced","type":"integer"},"defaultSynoMode":{"description":"default mode for synonyms","type":"string"},"defaultAmong":{"description":"default value for among","type":"integer"}},"required":["language"]},"ms":{"type":"integer","description":"the time in ms that was necessary to process the request (server side)"}}}]},"example":{"renderedText":"<p>Il chantera \"Non, je ne regrette rien\" d'Édith Piaf</p>","renderOptions":{"language":"fr_FR"}}}}},"400":{"description":"invalid user name, or issue during rendering"},"404":{"description":"template does not exist for that user"}}}},"/templates/render":{"post":{"summary":"Renders a template in the request using data also in the request.","description":"Both template and data are passed in the request. Template is automatically cached for a while to accelerate the next calls.","parameters":[{"name":"X-RapidAPI-User","in":"header","schema":{"type":"string"},"description":"ID of the user"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","allOf":[{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://rosaenlg.org/jsonPackage.schema.json","title":"RosaeNLG JsonPackage","description":"A JSON package containing RosaeNLG templates","type":"object","properties":{"format":{"description":"version of the format","type":"string"},"templateId":{"description":"ID of the template","type":"string"},"src":{"description":"source of the template","type":"object","properties":{"entryTemplate":{"description":"entry point of the Pug template","type":"string"},"compileInfo":{"description":"informations to compile the template","type":"object","properties":{"language":{"description":"language","type":"string"},"compileDebug":{"description":"activates Pug compile debug","type":"boolean"}},"required":["language"]},"templates":{"description":"templates: map of template path and name to template content","additionalProperties":{"type":"string"}},"autotest":{"description":"informations to autotest the template","type":"object","properties":{"activate":{"description":"autotest is activated","type":"boolean"},"input":{"description":"json input to make the test rendering","type":"object"},"expected":{"description":"expected result: the rendered string must contain each of the string in the list","type":"array","items":{"type":"string"},"minItems":1}},"required":["activate","input","expected"]}},"required":["entryTemplate","compileInfo","templates"]},"comp":{"description":"the pre compiled template","type":"object","properties":{"compiled":{"description":"the compiled template","type":"string"},"compiledWithVersion":{"description":"version of RosaeNLG that compiled the template","type":"string"},"compiledBy":{"description":"what component compiled the template","type":"string"},"compiledWhen":{"description":"when the template was compiled","type":"string"}},"required":["compiled","compiledWithVersion"]}},"required":["templateId","src"]}],"properties":{"data":{"description":"data to render the template","type":"object"}},"required":["template","data"]},"example":{"src":{"entryTemplate":"chanson.pug","compileInfo":{"activate":false,"compileDebug":false,"language":"fr_FR"},"templates":{"chanson.pug":"p\n  | il #[+verb(getAnonMS(), {verb: 'chanter', tense:'FUTUR'} )]\n  | \"#{chanson.nom}\"\n  | de #{chanson.auteur}\n"}},"data":{"language":"fr_FR","chanson":{"auteur":"Édith Piaf","nom":"Non, je ne regrette rien"}}}}},"required":true},"responses":{"200":{"description":"rendering went well","content":{"application/json":{"schema":{"type":"object","allOf":[{"type":"object","properties":{"renderedText":{"type":"string","description":"the rendered text (this is the interesting part)"},"renderOptions":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://rosaenlg.org/renderOptions.schema.json","title":"RosaeNLG Rendering Options","description":"RosaeNLG options to render a template. See https://rosaenlg.org/rosaenlg/1.4.0/advanced/params.html#_rendering_parameters","type":"object","properties":{"language":{"description":"the language of the template","type":"string","enum":["fr_FR","en_US","de_DE","it_IT","OTHER"]},"forceRandomSeed":{"description":"the random seed value, if it must be forced","type":"integer"},"defaultSynoMode":{"description":"default mode for synonyms","type":"string"},"defaultAmong":{"description":"default value for among","type":"integer"}},"required":["language"]},"ms":{"type":"integer","description":"the time in ms that was necessary to process the request (server side)"}}}],"properties":{"status":{"type":"string","description":"indicates if the template was created, or if it existed before and cached version could be used","enum":["CREATED","EXISTED"]}}},"example":{"status":"CREATED","renderedText":"<p>Il chantera \"Non, je ne regrette rien\" d'Édith Piaf</p>","renderOptions":{"language":"fr_FR"}}}}},"400":{"description":"invalid user, or missing template data, or missing data, or issue during template compilation, or issue during template rendering"}}}},"/templates/{templateId}/reload":{"put":{"summary":"Reloads a specific template from the disk or S3.","description":"Only works if a permanent storage is set (disk or S3).","parameters":[{"name":"templateId","in":"path","schema":{"type":"string"},"example":"chanson","required":"true","description":"ID of the template"},{"name":"X-RapidAPI-User","in":"header","schema":{"type":"string"},"description":"ID of the user"}],"responses":{"200":{"description":"the template was properly reloaded","content":{"application/json":{"schema":{"type":"object","properties":{"templateId":{"type":"string","description":"ID of the template"},"templateSha1":{"type":"string","description":"sha1 of the template, to be used in render requests"},"ms":{"type":"number","description":"the time in ms that was needed to load the template"}}},"example":{"templateId":"chanson","templateSha1":"1bfdbcd203ec8e6f889b068fbb2d7d298b1db903","ms":37.48320007324219}}}},"400":{"description":"invalid user, or no templates path and no S3"},"404":{"description":"template does not exist for that user, or invalid template"}}}}}}